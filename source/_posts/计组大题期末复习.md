---
title: 计组大题期末复习
category: 笔记
tags:
  - 计算机组成原理
banner_img: /img/banner/jizu.jpg
index_img: /img/cover/jizu.jpg
excerpt: 计算机组成原理期末考试主要大题题型答题思路及解法
date: 2022-11-22 20:38:19
---
## 1.CPU与存储器的连接

**题目如下：**
![](/img/content/jizu/cpu_store.jpg)
**要求：**
![](/img/content/jizu/yaoqiu.jpg)

**解题思路：**

1. 系统程序区不可修改，选择 `ROM`（只读存储器），用户程序区可修改，选择 `RAM`（随机存取存储器）
2. 先看 `ROM`：题中系统程序区为 `67FFH-6000H=7FFH=2K`，且 `CPU`数据线为8，所以 `ROM`规格为 `2k*8`。由于选择存储器遵循位扩展优先原则，因此 `ROM`的选择为：`一片2k*8的ROM芯片`
3. 再看 `RAM`：题中用户程序区为 `6800H-6BFFH=3FFH=1K`，且 `CPU`数据线为8，所以 `RAM`规格为 `1k*8`。由于选择存储器遵循位扩展优先原则，因此 `RAM`的选择为：`两片1k*4的RAM芯片`
4. 画出二进制地址码
   ![](/img/content/jizu/binary_add.jpg)
5. 地址线的选择
   `ROM`的规格为 `2k*8`（无扩展），因此 `ROM`的地址线范围 `A10~A0`。`RAM`的规格为 `1k*8`（位扩展，共用相同地址），因此 `RAM1和RAM2`的地址线范围都是 `A9~A0`。
6. 数据线的选择：
   `ROM`的规格为 `2k*8`（无扩展），因此 `ROM`的数据线范围 `D7~D0`。`RAM`的规格为 `1k*8`（位扩展，数据线一人一半），因此 `RAM1`的数据线范围 `D7~D4`，`RAM2`的数据线范围 `D3~D0`。
7. 片选线的选择
   `A15、A14`恒定不变，因此取 `MREQ、A15、A14`为译码器使能端输入。`A13、A12、A11`可区分 `ROM`和 `RAM`，因此取 `A13、A12、A11`为译码器输入端。当译码器输入端为100时为 `ROM`，即 `ROM`的片选线连接译码器的 `Y4`输出端口。当译码器输入端为101时为 `RAM`，即 `RAM`的片选线连接译码器的 `Y5`输出端口，注意：`A10`是空闲的，因此 `RAM`的片选还应满足 `A10=0`，即 `RAM`的片选为 `Y5输出端口 & A10`。
8. 画出基础框架
<img src="/img/content/jizu/basic_frame.jpg" width=60%>
9. 连线
<img src="/img/content/jizu/finish.jpg" width=60%>

## 2.海明码校验

**题目如下：**
*1、收到以下海明码，分别求出它们的欲传送代码：*
*（1）1100000（偶检验）*
*（2）0011001（奇检验）*
*2、求1001101的海明码（奇校验）*

**解题思路：**
*规则表如下*：

$$
\begin{array}{|c|c|c|c|c|c|c|c|}
	\hline C1&1&3&5&7&9&11&...\\
	\hline C2&2&3&6&7&10&11&...\\
	\hline C4&4&5&6&7&12&13&...\\
	\hline C8&8&9&10&11&12&13&...\\
	\hline ...&...&...&...&...&...&...&...\\
	\hline
\end{array}
$$

**题解：**

*(1.1)*
偶校验：偶数个1则为0，奇数个1为1，使用异或

$$
\begin{array}{|c|c|c|c|c|c|c|c|}
	\hline C1&C2&C3&C4&C5&C6&C7\\
	\hline 1&1&0&0&0&0&0\\
	\hline
\end{array}
$$

P1= C1 $\bigoplus$ C3 $\bigoplus$ C5 $\bigoplus$ C7 = 1
P2= C2 $\bigoplus$ C3 $\bigoplus$ C6 $\bigoplus$ C7 = 1
P4= C4 $\bigoplus$ C5 $\bigoplus$ C6 $\bigoplus$ C7 = 0
则 `P4P2P1=011`，所以出错位为 `C3`，校正后为：`1110000`
要传送的数据则为去掉检验为后的数据，即 `1000`
*(1.2)*
奇校验：奇数个1则为0，偶数个1为1，使用异或后再取非

$$
\begin{array}{|c|c|c|c|c|c|c|c|}
	\hline C1&C2&C3&C4&C5&C6&C7\\
	\hline 0&0&1&1&0&0&1\\
	\hline
\end{array}
$$

P1= $\lnot (C1 \bigoplus C3 \bigoplus C5 \bigoplus C7)$ = 1
P2= $\lnot (C2 \bigoplus C3 \bigoplus C6 \bigoplus C7)$ = 1
P4= $\lnot (C4 \bigoplus C5 \bigoplus C6 \bigoplus C7)$ = 1
则 `P4P2P1=111`，所以出错位为 `C7`，校正后为：`0011000`
要传送的数据则为去掉检验为后的数据，即 `1000`
*(2)*
1.先确定校验码位数n=4

$$
\begin{array}{|c|c|c|c|c|c|c|c|c|c|c|}
	\hline C1&C2&C3&C4&C5&C6&C7&C8&C9&C10&C11\\
	\hline &&1&&0&0&1&&1&0&1\\
	\hline
\end{array}
$$

2.求校验码
P1= $\lnot (C3 \bigoplus C5 \bigoplus C7 \bigoplus C9 \bigoplus C11)$ = 1
P2= $\lnot (C3 \bigoplus C6 \bigoplus C7 \bigoplus C10 \bigoplus C11)$ = 0
P4= $\lnot (C5 \bigoplus C6 \bigoplus C7)$ = 0
P8= $\lnot (C9 \bigoplus C10 \bigoplus C11)$ = 1
则 `P8P4P2P1=1001`，海明码为：`10100011101`

## 3.设计主存地址与命中率

**题目如下：**
*设主存容量为256KB，Cache容量为2KB，每字块8个字，每个字8位*
*（1）直接映射方式下设计主存地址*
*（2）二路组相联方式下设计主存地址*
*（3）全相联方式下设计主存地址*
*（4）若主存容量为256KB * 16位，块长不变，在四路组相联映射方式下设计主存地址*
*（5）设Cache初态为空，CPU依次从主存第0，1，2....99号单元读出100个字（主存一次读出一个字），并重复此次序10次，问命中率是多少？系统的效率是多少？（假设命中缓存时间为t，未命中时间为5t）*
*（6）求有缓存相比于没有缓存查询提高的倍数*

**解题思路：**
*1.直接映射：*
![](/img/content/jizu/zhijie.jpg)

$$
\begin{array}{|c|c|c|}
	\hline 主存字块标记&Cache字块地址&字块内地址\\
	\hline 主存位数-Cache字块地址-字块内地址&Cache位数-字块内地址&字块大小的位数\\
	\hline
\end{array}
$$

*2.组相联映射：*
![](/img/content/jizu/zuxianglian.jpg)
$$
\begin{array}{|c|c|c|}
	\hline 主存字块标记&组地址&字块内地址\\
	\hline 主存位数-组地址-字块内地址&Cache位数-字块内地址-路数位数&字块大小的位数\\
	\hline
\end{array}
$$

*3.全相联映射：*
![](/img/content/jizu/quanxianglian.jpg)
$$
\begin{array}{|c|c|}
	\hline 主存字块标记&字块内地址\\
	\hline 主存位数-字块内地址&字块大小的位数\\
	\hline
\end{array}
$$

**题解：**
*(1)*
字块内地址：每个字块大小为`8B`，`8=2^3`，因此字块内地址=3
Cache字块地址：Cache容量为`2KB=2^11B`，因此Cache字块地址=`Cache位数-字块内地址`=`11-3`=8
主存字块地址：主存容量为`256KB=2^18B`，因此主存字块地址=`主存位数-Cache字块地址-字块内地址`=`18-8-3`=7
$$
\begin{array}{|c|c|c|}
	\hline 主存字块标记&Cache字块地址&字块内地址\\
	\hline 7&8&3\\
	\hline
\end{array}
$$
*(2)*
字块内地址：每个字块大小为`8B`，`8=2^3`，因此字块内地址=3
组地址：Cache容量为`2KB=2^11B`，路数为`2=2^1`，因此组地址=`Cache位数-字块内地址-路数位数`=`11-3-1`=7
主存字块地址：主存容量为`256KB=2^18B`，因此`主存字块地址=主存位数-组地址-字块内地址`=`18-7-3`=8
$$
\begin{array}{|c|c|c|}
	\hline 主存字块标记&组地址&字块内地址\\
	\hline 8&7&3\\
	\hline
\end{array}
$$
*(3)*
字块内地址：每个字块大小为`8B`，`8=2^3`，因此字块内地址=3
主存字块地址：主存容量为`256KB=2^18B`，因此主存字块地址=`主存位数-字块内地址`=`18-3`=15
$$
\begin{array}{|c|c|}
	\hline 主存字块标记&字块内地址\\
	\hline 15&3\\
	\hline
\end{array}
$$
*(4)*
对齐字长：主存容量=`256K*16位=512K*8位`
字块内地址：每个字块大小为`8B`，`8=2^3`，因此字块内地址=3
组地址：Cache容量为`2KB=2^11B`，路数为`4=2^2`，因此组地址=`Cache位数-字块内地址-路数位数`=`11-3-2`=6
主存字块地址：主存容量为`512KB=2^19B`，因此`主存字块地址=主存位数-组地址-字块内地址`=`19-6-3`=10
$$
\begin{array}{|c|c|c|}
	\hline 主存字块标记&组地址&字块内地址\\
	\hline 10&6&3\\
	\hline
\end{array}
$$
*(5)*
求命中率：
命中率=访问缓存次数/总访问次数
由题：Cache初态为空，一个字块有8个字，因此每访问一次主存就将其附近8个字调入Cache
总访问数=100*10
未命中缓存的次数=$\lceil 100/8 \rceil$=13
$$
命中率h=\frac{100\times10-13}{100\times10}=98.7\%
$$
求效率：
tc：命中缓存的时间
tm：未命中缓存的时间，命中主存的时间
ta：平均访问时间
e：效率，$e=\frac{tc}{ta}$
现由题推出：
tc=t
tm=5t
$ta=h\times tc+(1-h)\times tm$
$$
效率e=\frac{tc}{ta}=\frac{t}{h\times t+(1-h)\times 5t}=\frac{t}{0.987\times t+0.013\times 5t}=95\%
$$
*(6)*
有缓存时的查询时间为ta
没有缓存的查询时间为tm
$$
提高倍数b=\frac{tm}{ta}-1=\frac{tm}{h\times tc+(1-h)\times tm}-1\approx3.753
$$

## 4.补码的加减法运算
**题目如下：**
（1）A=$-\frac{3}{16}$，B=$\frac{9}{32}$，求A+B 
（2）A=-87，B=53，求A-B 


**解题思路：**
原码：化为二进制形式，加上符号位
反码：原码除符号位外每位取反
补码：原码除符号位外每位取反，末位+1（反码+1）
移码：将补码的符号位取反
已知$A_补$，求$(-A)_补$：$A_补$带上符号位每位取反，末位+1
解题流程：
- 求补码
- 运算 
- 溢出判断
	- 符号位为1位：只有两个操作数符号相同时才会溢出，结果的符号与两操作数不同则溢出
	- 符号位为2位：若计算结果两位符号位不同则为溢出，01为正溢出，10为负溢出

**题解：**
*(1)*
先求原码：
A=$-\frac{3}{16}$=$-11 \div 2^{-4}$=-0.0011
B=$\frac{9}{32}$=$1001 \div 2^{-5}$=0.01001
再求补码：
$A_补$=1.1101
$B_补$=0.01001
计算：
$[A+B]_补$=$A_补$+$B_补$=1.1101+0.01001=10.00011（舍弃最高位）=0.00011
两操作数符号相反，不溢出，因此`A+B=0.00011`

*(2)*
先求原码：
A=-87=-1010111
B=53=110101
再求补码：
$A_补$=1,0101001
$B_补$=0,0110101（为了方便计算，在前面添0）
$(-B)_补$=1,1001011
计算：
$[A-B]_补$=$A_补$+$(-B)_补$=1,0101001+1,1001011=10,1110100（舍弃最高位）=0.1110100
两操作数符号均为1，结果符号位为0，故为溢出

## 5.补码的乘除运算
**题目如下：**
（1）x=-0.010111，y=-0.010101，求x $\times$ y 
（2）x=$\frac{13}{32}$，y=$-\frac{27}{32}$，求x $\div$ y 

**解题思路：**
乘法运算：求$x^{*}$和$y^{*}$->画表计算结果->判断符号位
除法运算：求${y^{*}}_补$和$[-{y^{*}}]_补$->画表计算结果->判断符号位

**题解：**
*(1)*
$x^{*}$=0.010111
$y^{*}$=0.010101
$$
\begin{array}{|c|c|c|c|c|c|}
	\hline &部分积&&乘数&&说明\\
	\hline &0.000000&&01010\underline1&&乘数为1，加上x^{*}\\
	\hline +&0.010111&&&&\\
	\hline &----&-&----&-&-------\\
	\hline &0.010111&&&&\\
	\hline &0.001011&&10101\underline0&&右移\\
	\hline +&0.000000&&&&乘数为0，加上0\\
	\hline &----&-&----&-&-------\\
	\hline &0.001011&&0&&\\
	\hline &0.000101&&11010\underline1&&右移\\
	\hline +&0.010111&&&&乘数为1，加上x^{*}\\
	\hline &----&-&----&-&-------\\
	\hline &0.011100&&10&&\\
	\hline &0.001110&&01101\underline0&&右移\\
	\hline +&0.000000&&&&乘数为0，加上0\\
	\hline &----&-&----&-&-------\\
	\hline &0.001110&&010&&\\
	\hline &0.000111&&00110\underline1&&右移\\
	\hline +&0.010111&&&&乘数为1，加上x^{*}\\
	\hline &----&-&----&-&-------\\
	\hline &0.011110&&1010&&\\
	\hline &0.001111&&00011\underline0&&右移\\
	\hline +&0.000000&&&&乘数为0，加上0\\
	\hline &----&-&----&-&-------\\
	\hline &0.001111&&01010&&\\
	\hline &0.000111&&100011&&右移\\
	\hline
\end{array}
$$
计算结果为：`0.000111 100011`，符号位=1 $\bigoplus$ 1=0
因此结果为：`0.000111 100011`

*(2)*
x=0.01101
y=-0.11011
$x^{*}$=0.01101
${y^{*}}_补$=0.11011
$[-{y^{*}}]_补$=1.00101
$$
\begin{array}{|c|c|c|c|c|c|}
	\hline &被除数&& 商 &&说明\\
	\hline &0.01101&&0.00000&&\\
	\hline +&1.00101&&&&+[-{y^{*}}]_补\\
	\hline &----&-&----&-&-------\\
	\hline &1.10010&&0&&\\
	\hline &1.00100&&0&&左移\\
	\hline +&0.11011&&&&+{y^{*}}_补\\
	\hline &----&-&----&-&-------\\
	\hline &1.11111&&00&&\\
	\hline &1.11110&&00&&左移\\
	\hline +&0.11011&&&&+{y^{*}}_补\\
	\hline &----&-&----&-&-------\\
	\hline &0.11001&&001&&\\
	\hline &1.10010&&001&&左移\\
	\hline +&1.00101&&&&+[-{y^{*}}]_补\\
	\hline &----&-&----&-&-------\\
	\hline &0.10111&&0011&&\\
	\hline &1.01110&&0011&&左移\\
	\hline +&1.00101&&&&+[-{y^{*}}]_补\\
	\hline &----&-&----&-&-------\\
	\hline &0.10011&&00111&&\\
	\hline &1.00110&&00111&&左移\\
	\hline +&1.00101&&&&+[-{y^{*}}]_补\\
	\hline &----&-&----&-&-------\\
	\hline &0.01011&&001111&&\\
	\hline
\end{array}
$$
计算结果为：`0,01111`，符号位=1 $\bigoplus$ 0=1
因此结果为：`1,01111`

## 6.定点数和浮点数表示
**题目如下：**
*设浮点数字长16位，其中阶码5位（1位阶符），尾数11位（1位数符）。将十进制数-58写成二进制定点数和浮点数并分别写出它在定点机和浮点机中的机器数形式。*

**解题思路：**
求定点数：
- x为小数：x.xxxx，保留符号位，尾数位数一致，右边添0
- x为整数：$\pm$ xxxx，不保留符号位，左边添0

求浮点数：
- x为小数：x,xx;x.1xxx，位数保证一致，尾数第一个数必须为1
- x为整数：$\pm$(0.1xxx)$\times 2^{xxx}$

**题解：**
x=-58=-111010
定点数：x=-0000111010
浮点数：x=-0.1110100000 $\times 2^{110}$（规格化） 
定点机：
- $[x]_原=1,0000111010$
- $[x]_补=1,1111000110$
- $[x]_反=1,1111000101$

浮点机：
- $[x]_原=0,0110;1.1110100000$
- $[x]_补=0,0110;1.0001100000$
- $[x]_反=0,0110;1.0001011111$

补充：$[x]_{阶移,尾补}=1,0110;1.0001100000$

## 7.浮点数加减法运算
**题目如下：**
![](/img/content/jizu/fudianjiajian.jpg)

**解题思路：**
- 写出操作数的浮点数规格化的补码形式（双符号位）
- 对阶：小阶码向大阶码对齐
- 尾数求和：将对阶后的两尾数按定点加减运算规则求和
- 规格化：确保尾数最高位与符号位不同，对尾数进行左规或右规
	- 左规：符号位两位相同，阶码-1，右边补0
	- 右规：符号位两位不同，阶码+1，左边添加的数与最高位一致
- 舍入：当右规时舍弃末位的1后，对规格化数再+1处理
- 溢出判断：
	- 阶符为01：上溢
	- 阶符为10：下溢，按机器零处理

**题解：**
1. 求补码
x=11,101;11.101000
y=11,100;00.111011
$[x]_补$=11,011;11.011000
$[y]_补$=11,100;00.111011
2. 对阶：
$[\Delta j]_补=J_{(x)_补}-J_{(y)_补}=J_{(x)_补}+J_{(-y)_补}=11,011+00,100=11,111$
所以，$\Delta j=-1，J_{(x)_补}<J_{(y)_补}$，对阶后$[x]_补=11,100;11.101100$
3. 尾数求和：
$[x]_补=11,100;11.101100$
$[y]_补=11,100;00.111011$
则$[S_x-S_y]_补=[S_x]_补+[-S_y]_补=11.101100+11.000101=10.110001$
即，$[x-y]_补=11,100;10.110001$
4. 规格化：
尾数的两符号不同，进行右规，阶码+1：$[x-y]_补=11,101;11.011000$
此时两符号位相同且尾数最高位与符号位不同，规格化完毕
5. 舍入：
上述右规舍弃末位的，因此结果+1：$[x-y]_补=11,101;11.011001$
6. 溢出判断：
两阶符位相等，无溢出
所以，$[x-y]_补=11,101;11.011001$

## 8.中断屏蔽及CPU执行程序轨迹
**题目如下：**
*设某机有4个中断源1，2，3，4。其响应优先级为1->2->3->4。现要求将中断处理优先次序改为4->1->3->2。根据下图画出的4个中断源的请求时刻，画出CPU执行程序的轨迹。设每个中断源的中断服务程序时间均为20$\mu$s。*
![](/img/content/jizu/zhongduanpingbi.jpg)

**解题思路：**
画出中断屏蔽表，根据中断屏蔽表画图

**题解：**
根据中断处理优先级为4->1->3->2，画出中断屏蔽表：
$$
\begin{array}{|c|c|c|c|c|}
	\hline 中断源&1&2&3&4\\
	\hline 1&1&1&1&0\\
	\hline 2&0&1&0&0\\
	\hline 3&0&1&1&0\\
	\hline 4&1&1&1&1\\
	\hline
\end{array}
$$
画图：
![](/img/content/jizu/zhongduan_answer.jpg)

## 9.输入输出系统方式
**题目如下：**
*一个DMA接口可采用周期窃取方式把字符传送到存储器，它支持的最大批量为400个字符。若存取周期为100ns，每处理一次中断需要5$\mu$s，现有的字符设备的传输率为9600bps，假设字符之间的传输无间隙。若忽略预处理所需的时间，试问采用DMA方式每秒因数据传输需占用处理器多少时间？如果采用完全中断方式，又需占用处理器多少时间？*

**解题思路：**
完全中断方式：每传送一个字符就中断一次，$t=字符数\times中断处理时间$
DMA方式：每传送一个字符耗时一个存取周期，每传送一个批量的字符才中断一次，$t=字符数\times存取周期+(字符数\div批量)\times中断处理时间$

**题解：**
9600/8=1200，字符设备传输率为1200Bps 
DMA方式：
$$
t_1=1200\times0.1+(1200\div400)\times5=135\mu s
$$
完全中断方式：
$$
t_2=1200\times5=6000\mu s
$$

参考资料：[计算机组成原理速成、不挂科、搞定期末考试大题（横屏版）](https://www.bilibili.com/video/BV1P3411v7gd/?spm_id_from=333.788.top_right_bar_window_default_collection.content.click&vd_source=26c95e35cccd29bb6633b68242402e97)